# Backend environment variables
# Copy to .env and adjust

# JWT secret for signing tokens (32+ random bytes). Example (PowerShell):
#   [System.Convert]::ToBase64String((New-Object Byte[] 48 | % { (Get-Random -Max 256) }))
# Or with openssl: openssl rand -base64 48
JWT_SECRET="REPLACE_WITH_STRONG_RANDOM_SECRET"

# CORS origin for frontend
CORS_ORIGIN="http://localhost:8080"

# Frontend external port for docker-compose (maps to container port 80)
# Used by docker-compose.yml: frontend ports -> "${WEB_PORT:-8080}:80"
WEB_PORT=8080

# Default Untis settings
UNTIS_DEFAULT_SCHOOL=
UNTIS_HOST=

# Timezone for lesson notifications (IANA timezone identifier)
# This should match the timezone where your WebUntis school is located
# Examples: Europe/Berlin, Europe/Vienna, Europe/Zurich, America/New_York
# If not set, defaults to Europe/Berlin
NOTIFICATION_TIMEZONE=Europe/Berlin

# Master key used to encrypt stored Untis credentials (hex, 32 bytes = 64 hex chars)
# Generate (PowerShell):  -join ((1..32) | % { '{0:x2}' -f (Get-Random -Max 256) })
# Or with openssl: openssl rand -hex 32
# If unset, a weak dev fallback is used (DO NOT use fallback in production)
PERIODIX_MASTER_KEY=

# Admin credentials (optional)
# When set, logging in with these will return an admin JWT for managing users.
PERIODIX_ADMIN_USERNAME=
PERIODIX_ADMIN_PASSWORD=

# Whitelist configuration for closed beta (optional)
# When WHITELIST_ENABLED=true, only users/classes listed in whitelist.json can register
# Copy whitelist.example.json to whitelist.json and customize as needed
# Existing users in the database will continue to work (grandfathered in)
# Admin users bypass the whitelist
WHITELIST_ENABLED=false

# Postgres connection string used by Prisma
# IMPORTANT: Change default database credentials for production.
# Used primarily by local docker-compose and Prisma.
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# When behind a reverse proxy, set to true to trust proxy headers (already enabled in app)
# TRUST_PROXY=true

# VAPID keys for Web Push notifications
# Generate keys with: npx web-push generate-vapid-keys
# Public key is used by frontend, private key is used by backend only
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:admin@yourdomain.com

######################################################
###Change this only when you know what you're doing###
######################################################

# CORS debugging
CORS_DEBUG=false

# Port for backend
PORT=3001

# DATABASE_URL embeds the credentials above; keep them in sync if you change.
DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5432/periodix?schema=public"

# Frontend env
VITE_API_BASE=http://localhost:3001

# Developer Mode Toggle
# Set to 'true' to enable the developer mode toggle in the timetable
VITE_ENABLE_DEVELOPER_MODE=false


